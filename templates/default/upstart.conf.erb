# nomad - nomad job file

description "Nomad Cluster Manager"
author "Nathan Williams <nath.e.will@gmail.com>"

# When to start the service
start on runlevel [2345]

# When to stop the service
stop on runlevel [016]

# Automatically restart if crashed
respawn

<% if !@environment.empty? %>
# Set environment variables for the service
  <%- @environment.each do |k, v| %>
env <%= @k %>=<%= @v %>
  <%- end %>

<% end %>
# Start the process
exec /usr/local/sbin/nomad agent <%= @daemon_args %>
